(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{7756:function(e,r,s){Promise.resolve().then(s.t.bind(s,2381,23)),Promise.resolve().then(s.bind(s,2063)),Promise.resolve().then(s.t.bind(s,173,23)),Promise.resolve().then(s.bind(s,1397))},2063:function(e,r,s){"use strict";s.r(r),s.d(r,{AuthProvider:function(){return c},useAuth:function(){return u}});var t=s(2872),n=s(4209),a=s(9835),o=s(1397);let i=(0,n.createContext)(void 0);function u(){let e=(0,n.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}function c(e){let{children:r}=e,[s,u]=(0,n.useState)(null),[c,l]=(0,n.useState)(null),[d,f]=(0,n.useState)(!0);(0,n.useEffect)(()=>{a.O.auth.getSession().then(e=>{var r;let{data:{session:s}}=e;l(s),u(null!==(r=null==s?void 0:s.user)&&void 0!==r?r:null),f(!1)});let{data:{subscription:e}}=a.O.auth.onAuthStateChange((e,r)=>{var s;l(r),u(null!==(s=null==r?void 0:r.user)&&void 0!==s?s:null),f(!1)});return()=>e.unsubscribe()},[]);let m=async e=>{try{var r,s,t;f(!0);let{data:n,error:i}=await a.O.auth.signInWithPassword({email:e.email,password:e.password});if(i)return o.default.error(i.message),{success:!1,error:i.message,timestamp:new Date};return n.user&&await a.O.from("users").update({last_login:new Date().toISOString()}).eq("id",n.user.id),o.default.success("Successfully signed in!"),{success:!0,user:n.user,accessToken:null===(r=n.session)||void 0===r?void 0:r.access_token,refreshToken:null===(s=n.session)||void 0===s?void 0:s.refresh_token,expiresIn:null===(t=n.session)||void 0===t?void 0:t.expires_in,timestamp:new Date}}catch(r){let e=r instanceof Error?r.message:"An error occurred";return o.default.error(e),{success:!1,error:e,timestamp:new Date}}finally{f(!1)}},_=async e=>{try{f(!0);let{data:r,error:s}=await a.O.auth.signUp({email:e.email,password:e.password,options:{data:{first_name:e.firstName,last_name:e.lastName}}});if(s)return o.default.error(s.message),{success:!1,error:s.message,timestamp:new Date};if(r.user){let{error:s}=await a.O.from("user_profiles").insert({user_id:r.user.id,first_name:e.firstName,last_name:e.lastName,timezone:"UTC",notification_preferences:{email:!0,sms:!1,discord:!1},risk_tolerance:"medium"});s&&console.error("Error creating user profile:",s)}return o.default.success("Account created! Please check your email for verification."),{success:!0,user:r.user,timestamp:new Date}}catch(r){let e=r instanceof Error?r.message:"An error occurred";return o.default.error(e),{success:!1,error:e,timestamp:new Date}}finally{f(!1)}},h=async()=>{try{f(!0);let{error:e}=await a.O.auth.signOut();if(e)throw o.default.error(e.message),e;o.default.success("Successfully signed out!")}catch(e){console.error("Error signing out:",e)}finally{f(!1)}},p=async e=>{try{let{error:r}=await a.O.auth.resetPasswordForEmail(e,{redirectTo:"".concat(window.location.origin,"/reset-password")});if(r)return{success:!1,error:r.message};return{success:!0}}catch(e){return{success:!1,error:e instanceof Error?e.message:"An error occurred"}}},v=async e=>{try{if(!s)return{success:!1,error:"No user logged in"};let{error:r}=await a.O.from("user_profiles").update(e).eq("user_id",s.id);if(r)return{success:!1,error:r.message};return{success:!0}}catch(e){return{success:!1,error:e instanceof Error?e.message:"An error occurred"}}};return(0,t.jsx)(i.Provider,{value:{user:s,session:c,loading:d,signIn:m,signUp:_,signOut:h,resetPassword:p,updateProfile:v},children:r})}},9835:function(e,r,s){"use strict";s.d(r,{O:function(){return i}});var t=s(4899),n=s(7337);let a=n.env.NEXT_PUBLIC_SUPABASE_URL||"https://placeholder.supabase.co",o=n.env.NEXT_PUBLIC_SUPABASE_ANON_KEY||"placeholder-key";("https://placeholder.supabase.co"===a||"placeholder-key"===o)&&console.warn("Missing Supabase environment variables. Please configure NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY");let i=(0,t.eI)(a,o)},2381:function(){},173:function(e){e.exports={style:{fontFamily:"'__Inter_e8ce0c', '__Inter_Fallback_e8ce0c'",fontStyle:"normal"},className:"__className_e8ce0c"}}},function(e){e.O(0,[676,577,726,744],function(){return e(e.s=7756)}),_N_E=e.O()}]);