(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[11],{6279:function(e,s,r){Promise.resolve().then(r.bind(r,8786))},8786:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return x}});var t=r(2872),a=r(4209),o=r(5358),n=r(1911),i=r(4700),l=r(5820),c=r(8237),d=r(2063),m=r(6073),u=r(144);let f=c.z.object({email:c.z.string().email("Invalid email address"),password:c.z.string().min(8,"Password must be at least 8 characters").regex(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]/,"Password must contain at least one uppercase letter, one lowercase letter, one number, and one special character"),confirmPassword:c.z.string(),firstName:c.z.string().min(1,"First name is required"),lastName:c.z.string().min(1,"Last name is required"),agreeToTerms:c.z.boolean().refine(e=>!0===e,"You must agree to the terms and conditions")}).refine(e=>e.password===e.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]});function x(){let[e,s]=(0,a.useState)(!1),[r,c]=(0,a.useState)(!1),[x,g]=(0,a.useState)(!1),{signUp:p}=(0,d.useAuth)(),h=(0,o.useRouter)(),{register:y,handleSubmit:w,formState:{errors:N},setError:b}=(0,i.cI)({resolver:(0,l.F)(f)}),v=async e=>{g(!0);try{let s=await p({email:e.email,password:e.password,firstName:e.firstName,lastName:e.lastName});s.success?h.push("/login?message=Please check your email to verify your account"):b("root",{message:s.error||"Registration failed"})}catch(e){b("root",{message:"An unexpected error occurred"})}finally{g(!1)}};return(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,t.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Create your account"}),(0,t.jsxs)("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Or"," ",(0,t.jsx)(n.default,{href:"/login",className:"font-medium text-indigo-600 hover:text-indigo-500",children:"sign in to your existing account"})]})]}),(0,t.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:w(v),children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"firstName",className:"block text-sm font-medium text-gray-700",children:"First Name"}),(0,t.jsx)("input",{...y("firstName"),type:"text",className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"First name"}),N.firstName&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-600",children:N.firstName.message})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"lastName",className:"block text-sm font-medium text-gray-700",children:"Last Name"}),(0,t.jsx)("input",{...y("lastName"),type:"text",className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"Last name"}),N.lastName&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-600",children:N.lastName.message})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email Address"}),(0,t.jsx)("input",{...y("email"),type:"email",autoComplete:"email",className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"Email address"}),N.email&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-600",children:N.email.message})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),(0,t.jsxs)("div",{className:"mt-1 relative",children:[(0,t.jsx)("input",{...y("password"),type:e?"text":"password",autoComplete:"new-password",className:"appearance-none relative block w-full px-3 py-2 pr-10 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"Password"}),(0,t.jsx)("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>s(!e),children:e?(0,t.jsx)(m.Z,{className:"h-5 w-5 text-gray-400"}):(0,t.jsx)(u.Z,{className:"h-5 w-5 text-gray-400"})})]}),N.password&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-600",children:N.password.message})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"Confirm Password"}),(0,t.jsxs)("div",{className:"mt-1 relative",children:[(0,t.jsx)("input",{...y("confirmPassword"),type:r?"text":"password",autoComplete:"new-password",className:"appearance-none relative block w-full px-3 py-2 pr-10 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"Confirm password"}),(0,t.jsx)("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>c(!r),children:r?(0,t.jsx)(m.Z,{className:"h-5 w-5 text-gray-400"}):(0,t.jsx)(u.Z,{className:"h-5 w-5 text-gray-400"})})]}),N.confirmPassword&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-600",children:N.confirmPassword.message})]}),(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("input",{...y("agreeToTerms"),type:"checkbox",className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),(0,t.jsxs)("label",{htmlFor:"agreeToTerms",className:"ml-2 block text-sm text-gray-900",children:["I agree to the"," ",(0,t.jsx)(n.default,{href:"/terms",className:"text-indigo-600 hover:text-indigo-500",children:"Terms and Conditions"})," ","and"," ",(0,t.jsx)(n.default,{href:"/privacy",className:"text-indigo-600 hover:text-indigo-500",children:"Privacy Policy"})]})]}),N.agreeToTerms&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-600",children:N.agreeToTerms.message})]}),N.root&&(0,t.jsx)("div",{className:"text-red-600 text-sm text-center",children:N.root.message}),(0,t.jsx)("div",{children:(0,t.jsx)("button",{type:"submit",disabled:x,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed",children:x?"Creating account...":"Create account"})})]})]})})}},2063:function(e,s,r){"use strict";r.r(s),r.d(s,{AuthProvider:function(){return c},useAuth:function(){return l}});var t=r(2872),a=r(4209),o=r(9835),n=r(1397);let i=(0,a.createContext)(void 0);function l(){let e=(0,a.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}function c(e){let{children:s}=e,[r,l]=(0,a.useState)(null),[c,d]=(0,a.useState)(null),[m,u]=(0,a.useState)(!0);(0,a.useEffect)(()=>{o.O.auth.getSession().then(e=>{var s;let{data:{session:r}}=e;d(r),l(null!==(s=null==r?void 0:r.user)&&void 0!==s?s:null),u(!1)});let{data:{subscription:e}}=o.O.auth.onAuthStateChange((e,s)=>{var r;d(s),l(null!==(r=null==s?void 0:s.user)&&void 0!==r?r:null),u(!1)});return()=>e.unsubscribe()},[]);let f=async e=>{try{var s,r,t;u(!0);let{data:a,error:i}=await o.O.auth.signInWithPassword({email:e.email,password:e.password});if(i)return n.default.error(i.message),{success:!1,error:i.message,timestamp:new Date};return a.user&&await o.O.from("users").update({last_login:new Date().toISOString()}).eq("id",a.user.id),n.default.success("Successfully signed in!"),{success:!0,user:a.user,accessToken:null===(s=a.session)||void 0===s?void 0:s.access_token,refreshToken:null===(r=a.session)||void 0===r?void 0:r.refresh_token,expiresIn:null===(t=a.session)||void 0===t?void 0:t.expires_in,timestamp:new Date}}catch(s){let e=s instanceof Error?s.message:"An error occurred";return n.default.error(e),{success:!1,error:e,timestamp:new Date}}finally{u(!1)}},x=async e=>{try{u(!0);let{data:s,error:r}=await o.O.auth.signUp({email:e.email,password:e.password,options:{data:{first_name:e.firstName,last_name:e.lastName}}});if(r)return n.default.error(r.message),{success:!1,error:r.message,timestamp:new Date};if(s.user){let{error:r}=await o.O.from("user_profiles").insert({user_id:s.user.id,first_name:e.firstName,last_name:e.lastName,timezone:"UTC",notification_preferences:{email:!0,sms:!1,discord:!1},risk_tolerance:"medium"});r&&console.error("Error creating user profile:",r)}return n.default.success("Account created! Please check your email for verification."),{success:!0,user:s.user,timestamp:new Date}}catch(s){let e=s instanceof Error?s.message:"An error occurred";return n.default.error(e),{success:!1,error:e,timestamp:new Date}}finally{u(!1)}},g=async()=>{try{u(!0);let{error:e}=await o.O.auth.signOut();if(e)throw n.default.error(e.message),e;n.default.success("Successfully signed out!")}catch(e){console.error("Error signing out:",e)}finally{u(!1)}},p=async e=>{try{let{error:s}=await o.O.auth.resetPasswordForEmail(e,{redirectTo:"".concat(window.location.origin,"/reset-password")});if(s)return{success:!1,error:s.message};return{success:!0}}catch(e){return{success:!1,error:e instanceof Error?e.message:"An error occurred"}}},h=async e=>{try{if(!r)return{success:!1,error:"No user logged in"};let{error:s}=await o.O.from("user_profiles").update(e).eq("user_id",r.id);if(s)return{success:!1,error:s.message};return{success:!0}}catch(e){return{success:!1,error:e instanceof Error?e.message:"An error occurred"}}};return(0,t.jsx)(i.Provider,{value:{user:r,session:c,loading:m,signIn:f,signUp:x,signOut:g,resetPassword:p,updateProfile:h},children:s})}},9835:function(e,s,r){"use strict";r.d(s,{O:function(){return i}});var t=r(4899),a=r(7337);let o=a.env.NEXT_PUBLIC_SUPABASE_URL||"https://placeholder.supabase.co",n=a.env.NEXT_PUBLIC_SUPABASE_ANON_KEY||"placeholder-key";("https://placeholder.supabase.co"===o||"placeholder-key"===n)&&console.warn("Missing Supabase environment variables. Please configure NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY");let i=(0,t.eI)(o,n)}},function(e){e.O(0,[676,376,911,577,726,744],function(){return e(e.s=6279)}),_N_E=e.O()}]);