(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[878],{8423:function(e,r,t){Promise.resolve().then(t.bind(t,6852))},6852:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return o}});var s=t(2872),a=t(4209),n=t(6045),i=t(5358),l=t(782);function o(){let[e,r]=(0,a.useState)({targetAddress:"",tradeSizeType:"FIXED",tradeSizeValue:"0.1",maxSlippage:"0.5",isActive:!1}),[t,o]=(0,a.useState)(!0),[c,d]=(0,a.useState)(!1),[u,m]=(0,a.useState)(""),[g,h]=(0,a.useState)(""),f=(0,i.useRouter)();(0,a.useEffect)(()=>{b()},[]);let b=async()=>{try{o(!0);let e=await fetch("/api/bots/copy-trader/config",{method:"GET",credentials:"include"});if(e.ok){let t=await e.json();t.config&&r(t.config)}else 401===e.status&&f.push("/login")}catch(e){console.error("Error fetching config:",e),h("Failed to load configuration. Using defaults.")}finally{o(!1)}},x=()=>e.targetAddress.trim()?/^0x[a-fA-F0-9]{40}$/.test(e.targetAddress.trim())?!e.tradeSizeValue||0>=parseFloat(e.tradeSizeValue)?(h("Trade size must be greater than 0"),!1):!("PERCENTAGE"===e.tradeSizeType&&parseFloat(e.tradeSizeValue)>100)||(h("Percentage cannot exceed 100%"),!1):(h("Invalid wallet address format"),!1):(h("Target wallet address is required"),!1),p=async t=>{if(t.preventDefault(),h(""),m(""),x()){d(!0);try{let t=await fetch("/api/bots/copy-trader/config",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)}),s=await t.json();t.ok?(m("Configuration saved successfully!"),r(s.config),setTimeout(()=>m(""),5e3)):h(s.message||"Failed to save configuration")}catch(e){console.error("Error saving config:",e),h("Network error. Please try again.")}finally{d(!1)}}};return t?(0,s.jsx)(l.Z,{children:(0,s.jsx)("div",{className:"min-h-screen bg-gray-900 text-white flex items-center justify-center",children:(0,s.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"}),(0,s.jsx)("p",{className:"text-gray-400",children:"Loading configuration..."})]})})}):(0,s.jsx)(l.Z,{children:(0,s.jsxs)("div",{className:"min-h-screen bg-gray-900 text-white p-8",children:[(0,s.jsx)("header",{className:"mb-10",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold",children:"Copy-Trading Bot Configuration"}),(0,s.jsx)("p",{className:"text-gray-400",children:"Configure the wallet to mirror and your trade parameters."})]}),(0,s.jsx)(n.z,{onClick:()=>f.push("/dashboard"),className:"bg-gray-700 hover:bg-gray-600",children:"← Back to Dashboard"})]})}),(0,s.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,s.jsxs)("div",{className:"bg-yellow-900/20 border-l-4 border-yellow-500 text-yellow-200 p-4 rounded-md mb-8",children:[(0,s.jsx)("p",{className:"font-bold",children:"⚠️ Important Notice"}),(0,s.jsx)("p",{children:"Copy trading involves risks including MEV front-running and slippage. Only follow trusted wallets with proven track records."})]}),u&&(0,s.jsx)("div",{className:"mb-6 p-4 bg-green-900/50 border border-green-500 rounded-md",children:(0,s.jsx)("p",{className:"text-green-200",children:u})}),g&&(0,s.jsx)("div",{className:"mb-6 p-4 bg-red-900/50 border border-red-500 rounded-md",children:(0,s.jsx)("p",{className:"text-red-200",role:"alert",children:g})}),(0,s.jsx)("div",{className:"bg-gray-800/50 p-8 rounded-lg shadow-lg",children:(0,s.jsxs)("form",{onSubmit:p,children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Target Wallet Address"}),(0,s.jsx)("input",{type:"text",value:e.targetAddress,onChange:e=>r(r=>({...r,targetAddress:e.target.value})),className:"w-full p-3 bg-gray-700 rounded-md border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0x...",disabled:c})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Trade Size Type"}),(0,s.jsxs)("select",{value:e.tradeSizeType,onChange:e=>r(r=>({...r,tradeSizeType:e.target.value})),className:"w-full p-3 bg-gray-700 rounded-md border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:c,children:[(0,s.jsx)("option",{value:"FIXED",children:"Fixed Amount"}),(0,s.jsx)("option",{value:"PERCENTAGE",children:"Percentage of Target's Trade"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"FIXED"===e.tradeSizeType?"Amount (ETH)":"Percentage (%)"}),(0,s.jsx)("input",{type:"number",step:"0.01",value:e.tradeSizeValue,onChange:e=>r(r=>({...r,tradeSizeValue:e.target.value})),className:"w-full p-3 bg-gray-700 rounded-md border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:c})]})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Max Slippage (%)"}),(0,s.jsx)("input",{type:"number",step:"0.1",value:e.maxSlippage,onChange:e=>r(r=>({...r,maxSlippage:e.target.value})),className:"w-full p-3 bg-gray-700 rounded-md border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:c})]}),(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsx)(n.z,{type:"submit",disabled:c,className:"min-w-[120px]",children:c?"Saving...":"Save Configuration"})})]})}),(0,s.jsxs)("div",{className:"mt-8 bg-blue-900/20 border-l-4 border-blue-500 text-blue-200 p-4 rounded-md",children:[(0,s.jsx)("p",{className:"font-bold",children:"\uD83D\uDCA1 How Copy Trading Works"}),(0,s.jsxs)("ul",{className:"mt-2 space-y-1 text-sm",children:[(0,s.jsx)("li",{children:"• Monitors the target wallet for new transactions"}),(0,s.jsx)("li",{children:"• Replicates trades with your specified size parameters"}),(0,s.jsx)("li",{children:"• Includes MEV protection and slippage controls"}),(0,s.jsx)("li",{children:"• Requires sufficient balance for trading operations"})]})]})]})]})})}},782:function(e,r,t){"use strict";t.d(r,{Z:function(){return l}});var s=t(2872),a=t(4209),n=t(5358),i=t(5543);function l(e){let{children:r}=e,{isAuthenticated:t,isLoading:l}=(0,i.useAuth)(),o=(0,n.useRouter)();return((0,a.useEffect)(()=>{l||t||o.replace("/login")},[t,l,o]),l)?(0,s.jsx)("div",{className:"min-h-screen bg-gray-900 text-white flex items-center justify-center",children:(0,s.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"}),(0,s.jsx)("p",{className:"text-gray-400",children:"Verifying authentication..."})]})}):t?(0,s.jsx)(s.Fragment,{children:r}):null}},5543:function(e,r,t){"use strict";t.r(r),t.d(r,{AuthProvider:function(){return i},useAuth:function(){return l}});var s=t(2872),a=t(4209);let n=(0,a.createContext)(void 0),i=e=>{let{children:r}=e,[t,i]=(0,a.useState)(null),[l,o]=(0,a.useState)(!1),[c,d]=(0,a.useState)(!0),u=async()=>{try{let e=await fetch("/api/auth/me",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(e.ok){let r=await e.json();r.success&&r.user?(i(r.user),o(!0)):(i(null),o(!1))}else i(null),o(!1)}catch(e){console.error("Auth check failed:",e),i(null),o(!1)}finally{d(!1)}},m=async(e,r)=>{try{if(d(!0),!e||!r)return{success:!1,message:"Email and password are required"};if(!e.includes("@")||e.length<5)return{success:!1,message:"Please enter a valid email address"};if(r.length<8)return{success:!1,message:"Password must be at least 8 characters"};let t=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:e.toLowerCase().trim(),password:r})}),s=await t.json();if(t.ok&&s.success)return i(s.user),o(!0),{success:!0};return i(null),o(!1),{success:!1,message:s.message||"Login failed. Please check your credentials."}}catch(e){return console.error("Login error:",e),i(null),o(!1),{success:!1,message:"Network error. Please check your connection and try again."}}finally{d(!1)}},g=async()=>{try{await fetch("/api/auth/logout",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"}})}catch(e){console.error("Logout error:",e)}finally{i(null),o(!1)}};return(0,a.useEffect)(()=>{u();let e=()=>{"visible"===document.visibilityState&&l&&u()};return document.addEventListener("visibilitychange",e),()=>document.removeEventListener("visibilitychange",e)},[]),(0,a.useEffect)(()=>{if(!l)return;let e=setInterval(()=>{u()},3e5);return()=>clearInterval(e)},[l]),(0,s.jsx)(n.Provider,{value:{user:t,isAuthenticated:l,isLoading:c,login:m,logout:g,checkAuth:u},children:r})},l=()=>{let e=(0,a.useContext)(n);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},5358:function(e,r,t){"use strict";var s=t(230);t.o(s,"useRouter")&&t.d(r,{useRouter:function(){return s.useRouter}})},6045:function(e,r,t){"use strict";t.d(r,{z:function(){return a}});var s=t(2872);function a(e){let{children:r,className:t="",...a}=e;return(0,s.jsx)("button",{className:"px-5 py-2.5 text-base cursor-pointer bg-blue-600 text-white border-0 rounded-md hover:bg-blue-700 transition-colors ".concat(t),...a,children:r})}t(4209)}},function(e){e.O(0,[577,726,744],function(){return e(e.s=8423)}),_N_E=e.O()}]);