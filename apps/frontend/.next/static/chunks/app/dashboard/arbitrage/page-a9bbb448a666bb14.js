(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[634],{9531:function(e,t,r){Promise.resolve().then(r.bind(r,7481))},7481:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return l}});var s=r(2872),i=r(4209),a=r(6045),n=r(5358),o=r(782);function l(){let[e,t]=(0,i.useState)({tokenA:"",tokenB:"",tradeSize:"1.0",minProfit:"0.1",maxSlippage:"0.5",gasLimit:"500000",isActive:!1}),[r,l]=(0,i.useState)(!0),[c,d]=(0,i.useState)(!1),[u,m]=(0,i.useState)(""),[g,f]=(0,i.useState)(""),[b,h]=(0,i.useState)({}),x=(0,n.useRouter)();(0,i.useEffect)(()=>{p()},[]);let p=async()=>{try{l(!0);let e=await fetch("/api/bots/arbitrage/config",{method:"GET",credentials:"include"});if(e.ok){let r=await e.json();r.config&&t(r.config)}else 401===e.status&&x.push("/login")}catch(e){console.error("Error fetching config:",e),f("Failed to load configuration. Using defaults.")}finally{l(!1)}},y=()=>{let t={};return e.tokenA.trim()||(t.tokenA="Token A is required"),e.tokenB.trim()||(t.tokenB="Token B is required"),e.tokenA.trim()===e.tokenB.trim()&&(t.tokenB="Token A and Token B must be different"),(!e.tradeSize||0>=parseFloat(e.tradeSize))&&(t.tradeSize="Trade size must be greater than 0"),(!e.minProfit||0>=parseFloat(e.minProfit))&&(t.minProfit="Minimum profit must be greater than 0"),(!e.maxSlippage||0>=parseFloat(e.maxSlippage)||parseFloat(e.maxSlippage)>50)&&(t.maxSlippage="Max slippage must be between 0 and 50%"),(!e.gasLimit||21e3>parseInt(e.gasLimit))&&(t.gasLimit="Gas limit must be at least 21,000"),h(t),0===Object.keys(t).length},j=async r=>{if(r.preventDefault(),f(""),m(""),!y()){f("Please fix the validation errors below");return}d(!0);try{let r=await fetch("/api/bots/arbitrage/config",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)}),s=await r.json();r.ok?(m("Configuration saved successfully!"),t(s.config),setTimeout(()=>m(""),5e3)):f(s.message||"Failed to save configuration")}catch(e){console.error("Error saving config:",e),f("Network error. Please try again.")}finally{d(!1)}},v=async()=>{if(!e.id){f("Please save the configuration first");return}try{let r=await fetch("/api/bots/arbitrage/".concat(e.isActive?"stop":"start"),{method:"POST",credentials:"include",body:JSON.stringify({configId:e.id}),headers:{"Content-Type":"application/json"}}),s=await r.json();r.ok?(t(e=>({...e,isActive:!e.isActive})),m("Bot ".concat(e.isActive?"stopped":"started"," successfully!")),setTimeout(()=>m(""),5e3)):f(s.message||"Failed to ".concat(e.isActive?"stop":"start"," bot"))}catch(e){console.error("Error toggling bot:",e),f("Network error. Please try again.")}};return r?(0,s.jsx)(o.Z,{children:(0,s.jsx)("div",{className:"min-h-screen bg-gray-900 text-white flex items-center justify-center",children:(0,s.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"}),(0,s.jsx)("p",{className:"text-gray-400",children:"Loading configuration..."})]})})}):(0,s.jsx)(o.Z,{children:(0,s.jsxs)("div",{className:"min-h-screen bg-gray-900 text-white p-8",children:[(0,s.jsx)("header",{className:"mb-10",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold",children:"Arbitrage Bot Configuration"}),(0,s.jsx)("p",{className:"text-gray-400",children:"Configure parameters for cross-DEX arbitrage opportunities."})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)(a.z,{onClick:()=>x.push("/dashboard"),className:"bg-gray-700 hover:bg-gray-600",children:"← Back to Dashboard"}),e.id&&(0,s.jsx)(a.z,{onClick:v,className:e.isActive?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700",children:e.isActive?"Stop Bot":"Start Bot"})]})]})}),(0,s.jsxs)("div",{className:"max-w-4xl mx-auto",children:[e.isActive&&(0,s.jsxs)("div",{className:"bg-green-900/20 border-l-4 border-green-500 text-green-200 p-4 rounded-md mb-8",children:[(0,s.jsx)("p",{className:"font-bold",children:"\uD83E\uDD16 Bot is Running"}),(0,s.jsx)("p",{children:"The arbitrage bot is actively monitoring for opportunities with your current configuration."})]}),u&&(0,s.jsx)("div",{className:"mb-6 p-4 bg-green-900/50 border border-green-500 rounded-md",children:(0,s.jsx)("p",{className:"text-green-200",children:u})}),g&&(0,s.jsx)("div",{className:"mb-6 p-4 bg-red-900/50 border border-red-500 rounded-md",children:(0,s.jsx)("p",{className:"text-red-200",role:"alert",children:g})}),(0,s.jsx)("div",{className:"bg-gray-800/50 p-8 rounded-lg shadow-lg",children:(0,s.jsxs)("form",{onSubmit:j,children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Token A (Sell Token)"}),(0,s.jsx)("input",{type:"text",value:e.tokenA,onChange:e=>t(t=>({...t,tokenA:e.target.value})),className:"w-full p-3 bg-gray-700 rounded-md border ".concat(b.tokenA?"border-red-500":"border-gray-600"," focus:outline-none focus:ring-2 focus:ring-blue-500"),placeholder:"ETH, WETH, USDC...",disabled:c}),b.tokenA&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-400",children:b.tokenA})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Token B (Buy Token)"}),(0,s.jsx)("input",{type:"text",value:e.tokenB,onChange:e=>t(t=>({...t,tokenB:e.target.value})),className:"w-full p-3 bg-gray-700 rounded-md border ".concat(b.tokenB?"border-red-500":"border-gray-600"," focus:outline-none focus:ring-2 focus:ring-blue-500"),placeholder:"DAI, USDC, WETH...",disabled:c}),b.tokenB&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-400",children:b.tokenB})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Trade Size (ETH)"}),(0,s.jsx)("input",{type:"number",step:"0.01",value:e.tradeSize,onChange:e=>t(t=>({...t,tradeSize:e.target.value})),className:"w-full p-3 bg-gray-700 rounded-md border ".concat(b.tradeSize?"border-red-500":"border-gray-600"," focus:outline-none focus:ring-2 focus:ring-blue-500"),disabled:c}),b.tradeSize&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-400",children:b.tradeSize})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Min. Profit (%)"}),(0,s.jsx)("input",{type:"number",step:"0.01",value:e.minProfit,onChange:e=>t(t=>({...t,minProfit:e.target.value})),className:"w-full p-3 bg-gray-700 rounded-md border ".concat(b.minProfit?"border-red-500":"border-gray-600"," focus:outline-none focus:ring-2 focus:ring-blue-500"),disabled:c}),b.minProfit&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-400",children:b.minProfit})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Max Slippage (%)"}),(0,s.jsx)("input",{type:"number",step:"0.1",value:e.maxSlippage,onChange:e=>t(t=>({...t,maxSlippage:e.target.value})),className:"w-full p-3 bg-gray-700 rounded-md border ".concat(b.maxSlippage?"border-red-500":"border-gray-600"," focus:outline-none focus:ring-2 focus:ring-blue-500"),disabled:c}),b.maxSlippage&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-400",children:b.maxSlippage})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Gas Limit"}),(0,s.jsx)("input",{type:"number",value:e.gasLimit,onChange:e=>t(t=>({...t,gasLimit:e.target.value})),className:"w-full p-3 bg-gray-700 rounded-md border ".concat(b.gasLimit?"border-red-500":"border-gray-600"," focus:outline-none focus:ring-2 focus:ring-blue-500"),disabled:c}),b.gasLimit&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-400",children:b.gasLimit})]})]}),(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsx)(a.z,{type:"submit",disabled:c,className:"min-w-[120px]",children:c?"Saving...":"Save Configuration"})})]})}),(0,s.jsxs)("div",{className:"mt-8 bg-blue-900/20 border-l-4 border-blue-500 text-blue-200 p-4 rounded-md",children:[(0,s.jsx)("p",{className:"font-bold",children:"\uD83D\uDCA1 How Arbitrage Works"}),(0,s.jsxs)("ul",{className:"mt-2 space-y-1 text-sm",children:[(0,s.jsx)("li",{children:"• Monitors price differences between DEXs for the specified token pair"}),(0,s.jsx)("li",{children:"• Executes trades when profit exceeds minimum threshold"}),(0,s.jsx)("li",{children:"• Accounts for gas costs and slippage in profit calculations"}),(0,s.jsx)("li",{children:"• Requires sufficient balance in both tokens for optimal performance"})]})]})]})]})})}},782:function(e,t,r){"use strict";r.d(t,{Z:function(){return o}});var s=r(2872),i=r(4209),a=r(5358),n=r(5543);function o(e){let{children:t}=e,{isAuthenticated:r,isLoading:o}=(0,n.useAuth)(),l=(0,a.useRouter)();return((0,i.useEffect)(()=>{o||r||l.replace("/login")},[r,o,l]),o)?(0,s.jsx)("div",{className:"min-h-screen bg-gray-900 text-white flex items-center justify-center",children:(0,s.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"}),(0,s.jsx)("p",{className:"text-gray-400",children:"Verifying authentication..."})]})}):r?(0,s.jsx)(s.Fragment,{children:t}):null}},5543:function(e,t,r){"use strict";r.r(t),r.d(t,{AuthProvider:function(){return n},useAuth:function(){return o}});var s=r(2872),i=r(4209);let a=(0,i.createContext)(void 0),n=e=>{let{children:t}=e,[r,n]=(0,i.useState)(null),[o,l]=(0,i.useState)(!1),[c,d]=(0,i.useState)(!0),u=async()=>{try{let e=await fetch("/api/auth/me",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(e.ok){let t=await e.json();t.success&&t.user?(n(t.user),l(!0)):(n(null),l(!1))}else n(null),l(!1)}catch(e){console.error("Auth check failed:",e),n(null),l(!1)}finally{d(!1)}},m=async(e,t)=>{try{if(d(!0),!e||!t)return{success:!1,message:"Email and password are required"};if(!e.includes("@")||e.length<5)return{success:!1,message:"Please enter a valid email address"};if(t.length<8)return{success:!1,message:"Password must be at least 8 characters"};let r=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:e.toLowerCase().trim(),password:t})}),s=await r.json();if(r.ok&&s.success)return n(s.user),l(!0),{success:!0};return n(null),l(!1),{success:!1,message:s.message||"Login failed. Please check your credentials."}}catch(e){return console.error("Login error:",e),n(null),l(!1),{success:!1,message:"Network error. Please check your connection and try again."}}finally{d(!1)}},g=async()=>{try{await fetch("/api/auth/logout",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"}})}catch(e){console.error("Logout error:",e)}finally{n(null),l(!1)}};return(0,i.useEffect)(()=>{u();let e=()=>{"visible"===document.visibilityState&&o&&u()};return document.addEventListener("visibilitychange",e),()=>document.removeEventListener("visibilitychange",e)},[]),(0,i.useEffect)(()=>{if(!o)return;let e=setInterval(()=>{u()},3e5);return()=>clearInterval(e)},[o]),(0,s.jsx)(a.Provider,{value:{user:r,isAuthenticated:o,isLoading:c,login:m,logout:g,checkAuth:u},children:t})},o=()=>{let e=(0,i.useContext)(a);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},5358:function(e,t,r){"use strict";var s=r(230);r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}})},6045:function(e,t,r){"use strict";r.d(t,{z:function(){return i}});var s=r(2872);function i(e){let{children:t,className:r="",...i}=e;return(0,s.jsx)("button",{className:"px-5 py-2.5 text-base cursor-pointer bg-blue-600 text-white border-0 rounded-md hover:bg-blue-700 transition-colors ".concat(r),...i,children:t})}r(4209)}},function(e){e.O(0,[577,726,744],function(){return e(e.s=9531)}),_N_E=e.O()}]);