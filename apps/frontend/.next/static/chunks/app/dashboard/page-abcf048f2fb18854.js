(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{2891:function(e,s,t){Promise.resolve().then(t.bind(t,2719))},2719:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return C}});var r=t(2872),a=t(4209),i=t(5358),l=t(2063),n=t(4700),d=t(5820),c=t(8237),o=t(4753),m=t(5166),u=t(6073),x=t(144),h=t(9835),g=t(7096),f=t(1270);t(302),t(6481);var p=t(5537).Buffer,y=g.z.string().min(1).max(1e3),j=g.z.string().min(32).max(32);g.z.object({iv:g.z.string(),content:g.z.string()}),g.z.string(),g.z.object({userId:g.z.string(),walletAddress:g.z.string().optional(),exp:g.z.number()});var v=class extends Error{constructor(e){super(e),this.name="EncryptionError"}},N=t(1397),b=t(7337);let w=c.z.object({name:c.z.string().min(1,"Wallet name is required"),address:c.z.string().min(1,"Wallet address is required"),chain:c.z.enum(["ethereum","bsc","solana","polygon","arbitrum","optimism"]),privateKey:c.z.string().min(1,"Private key is required"),walletType:c.z.enum(["imported","generated"]).default("imported")});function _(){let[e,s]=(0,a.useState)([]),[t,i]=(0,a.useState)(!1),[c,g]=(0,a.useState)({}),[_,k]=(0,a.useState)(!0),[E,A]=(0,a.useState)({}),{user:S}=(0,l.useAuth)(),{register:C,handleSubmit:D,formState:{errors:P},reset:O,setError:T}=(0,n.cI)({resolver:(0,d.F)(w)});(0,a.useEffect)(()=>{S&&z()},[S]);let z=async()=>{try{k(!0);let{data:e,error:t}=await h.O.from("wallets").select("*").eq("user_id",null==S?void 0:S.id).eq("is_active",!0).order("created_at",{ascending:!1});if(t)throw t;s(e||[]),e&&B(e)}catch(e){console.error("Error fetching wallets:",e),N.default.error("Failed to fetch wallets")}finally{k(!1)}},B=async e=>{let s={};for(let t of e)try{s[t.id]="0.0"}catch(e){console.error("Error fetching balance for wallet ".concat(t.id,":"),e),s[t.id]="Error"}A(s)},W=async e=>{try{if(!S){N.default.error("User not authenticated");return}let s=b.env.NEXT_PUBLIC_MASTER_ENCRYPTION_KEY;if(!s){N.default.error("Encryption key not configured");return}let t=function(e,s){try{y.parse(e),j.parse(s);let t=(0,f.randomBytes)(16),r=(0,f.createCipheriv)("aes-256-cbc",p.from(s),t),a=r.update(e,"utf8","hex");return a+=r.final("hex"),{iv:t.toString("hex"),content:a}}catch(e){if(e instanceof Error)throw new v("Failed to encrypt private key: ".concat(e.message));throw new v("Failed to encrypt private key")}}(e.privateKey,s),{error:r}=await h.O.from("wallets").insert({user_id:S.id,name:e.name,address:e.address,chain:e.chain,encrypted_private_key:t.content,wallet_type:e.walletType,is_active:!0});if(r)throw r;N.default.success("Wallet added successfully"),O(),i(!1),z()}catch(e){console.error("Error adding wallet:",e),N.default.error("Failed to add wallet")}},U=async e=>{if(confirm("Are you sure you want to delete this wallet?"))try{let{error:s}=await h.O.from("wallets").update({is_active:!1}).eq("id",e);if(s)throw s;N.default.success("Wallet deleted successfully"),z()}catch(e){console.error("Error deleting wallet:",e),N.default.error("Failed to delete wallet")}},I=e=>{g(s=>({...s,[e]:!s[e]}))},L=e=>({ethereum:"⟠",bsc:"\uD83D\uDFE1",solana:"◎",polygon:"\uD83D\uDD37",arbitrum:"\uD83D\uDD35",optimism:"\uD83D\uDD34"})[e]||"⚪";return _?(0,r.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-indigo-600"})}):(0,r.jsxs)("div",{className:"max-w-6xl mx-auto p-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Wallet Management"}),(0,r.jsxs)("button",{onClick:()=>i(!0),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[(0,r.jsx)(o.Z,{className:"h-5 w-5 mr-2"}),"Add Wallet"]})]}),t&&(0,r.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,r.jsx)("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:(0,r.jsxs)("div",{className:"mt-3",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Add New Wallet"}),(0,r.jsxs)("form",{onSubmit:D(W),className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Wallet Name"}),(0,r.jsx)("input",{...C("name"),type:"text",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",placeholder:"My Trading Wallet"}),P.name&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:P.name.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Chain"}),(0,r.jsxs)("select",{...C("chain"),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",children:[(0,r.jsx)("option",{value:"ethereum",children:"Ethereum"}),(0,r.jsx)("option",{value:"bsc",children:"Binance Smart Chain"}),(0,r.jsx)("option",{value:"solana",children:"Solana"}),(0,r.jsx)("option",{value:"polygon",children:"Polygon"}),(0,r.jsx)("option",{value:"arbitrum",children:"Arbitrum"}),(0,r.jsx)("option",{value:"optimism",children:"Optimism"})]}),P.chain&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:P.chain.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Wallet Address"}),(0,r.jsx)("input",{...C("address"),type:"text",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",placeholder:"0x..."}),P.address&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:P.address.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Private Key"}),(0,r.jsx)("input",{...C("privateKey"),type:"password",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Private key (will be encrypted)"}),P.privateKey&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:P.privateKey.message}),(0,r.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"⚠️ Your private key will be encrypted and stored securely"})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,r.jsx)("button",{type:"button",onClick:()=>{i(!1),O()},className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,r.jsx)("button",{type:"submit",className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700",children:"Add Wallet"})]})]})]})})}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(e=>(0,r.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg border",children:(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("span",{className:"text-2xl mr-3",children:L(e.chain)}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:e.name}),(0,r.jsx)("p",{className:"text-sm text-gray-500 capitalize",children:e.chain})]})]}),(0,r.jsx)("button",{onClick:()=>U(e.id),className:"text-red-400 hover:text-red-600",children:(0,r.jsx)(m.Z,{className:"h-5 w-5"})})]}),(0,r.jsxs)("div",{className:"mt-4",children:[(0,r.jsx)("div",{className:"text-sm text-gray-500",children:"Address"}),(0,r.jsx)("div",{className:"text-sm font-mono bg-gray-100 p-2 rounded break-all",children:e.address})]}),(0,r.jsxs)("div",{className:"mt-4",children:[(0,r.jsx)("div",{className:"text-sm text-gray-500",children:"Balance"}),(0,r.jsxs)("div",{className:"text-lg font-semibold text-gray-900",children:[E[e.id]||"Loading..."," ","solana"===e.chain?"SOL":"ETH"]})]}),(0,r.jsxs)("div",{className:"mt-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-sm text-gray-500",children:"Private Key"}),(0,r.jsx)("button",{onClick:()=>I(e.id),className:"text-gray-400 hover:text-gray-600",children:c[e.id]?(0,r.jsx)(u.Z,{className:"h-4 w-4"}):(0,r.jsx)(x.Z,{className:"h-4 w-4"})})]}),(0,r.jsx)("div",{className:"text-xs font-mono bg-gray-100 p-2 rounded break-all mt-1",children:(c[e.id],"••••••••••••••••••••••••••••••••")})]}),(0,r.jsxs)("div",{className:"mt-4 flex justify-between text-xs text-gray-500",children:[(0,r.jsxs)("span",{children:["Type: ",e.wallet_type]}),(0,r.jsxs)("span",{children:["Added: ",new Date(e.created_at).toLocaleDateString()]})]})]})},e.id))}),0===e.length&&(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No wallets"}),(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by adding your first wallet."}),(0,r.jsx)("div",{className:"mt-6",children:(0,r.jsxs)("button",{onClick:()=>i(!0),className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700",children:[(0,r.jsx)(o.Z,{className:"h-5 w-5 mr-2"}),"Add Wallet"]})})]})]})}var k=t(3749),E=t(789),A=t(4764),S=t(7178);function C(){let{user:e,loading:s}=(0,l.useAuth)(),t=(0,i.useRouter)();return((0,a.useEffect)(()=>{s||e||t.push("/login")},[e,s,t]),s)?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-indigo-600"})}):e?(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)("header",{className:"bg-white shadow",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"flex justify-between items-center py-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Trading Bot Dashboard"}),(0,r.jsxs)("p",{className:"text-gray-600",children:["Welcome back, ",e.email]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("button",{className:"bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-md text-sm font-medium",children:"Start Trading"}),(0,r.jsx)("button",{onClick:()=>{},className:"text-gray-500 hover:text-gray-700 text-sm",children:"Sign Out"})]})]})})}),(0,r.jsxs)("main",{className:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,r.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,r.jsx)("div",{className:"p-5",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)(k.Z,{className:"h-6 w-6 text-gray-400"})}),(0,r.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,r.jsxs)("dl",{children:[(0,r.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Total Portfolio Value"}),(0,r.jsx)("dd",{className:"text-lg font-medium text-gray-900",children:"$0.00"})]})})]})})}),(0,r.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,r.jsx)("div",{className:"p-5",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)(E.Z,{className:"h-6 w-6 text-gray-400"})}),(0,r.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,r.jsxs)("dl",{children:[(0,r.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"24h P&L"}),(0,r.jsx)("dd",{className:"text-lg font-medium text-green-600",children:"+$0.00"})]})})]})})}),(0,r.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,r.jsx)("div",{className:"p-5",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)(A.Z,{className:"h-6 w-6 text-gray-400"})}),(0,r.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,r.jsxs)("dl",{children:[(0,r.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Active Bots"}),(0,r.jsx)("dd",{className:"text-lg font-medium text-gray-900",children:"0"})]})})]})})}),(0,r.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,r.jsx)("div",{className:"p-5",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)(S.Z,{className:"h-6 w-6 text-yellow-400"})}),(0,r.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,r.jsxs)("dl",{children:[(0,r.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Risk Level"}),(0,r.jsx)("dd",{className:"text-lg font-medium text-yellow-600",children:"Medium"})]})})]})})})]}),(0,r.jsxs)("div",{className:"bg-white shadow rounded-lg mb-8",children:[(0,r.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,r.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"Quick Actions"})}),(0,r.jsx)("div",{className:"p-6",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsx)("button",{className:"flex items-center justify-center px-4 py-3 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700",children:"Create Arbitrage Bot"}),(0,r.jsx)("button",{className:"flex items-center justify-center px-4 py-3 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700",children:"Setup Copy Trading"}),(0,r.jsx)("button",{className:"flex items-center justify-center px-4 py-3 border border-transparent text-sm font-medium rounded-md text-white bg-purple-600 hover:bg-purple-700",children:"Configure MEV Bot"})]})})]}),(0,r.jsxs)("div",{className:"bg-white shadow rounded-lg mb-8",children:[(0,r.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200",children:[(0,r.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"Wallet Management"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Manage your trading wallets and view balances"})]}),(0,r.jsx)("div",{className:"p-6",children:(0,r.jsx)(_,{})})]}),(0,r.jsxs)("div",{className:"bg-white shadow rounded-lg",children:[(0,r.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,r.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"Recent Activity"})}),(0,r.jsx)("div",{className:"p-6",children:(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("p",{className:"text-gray-500",children:"No recent trading activity"}),(0,r.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:"Start a bot to see your trades here"})]})})]})]})]}):null}},2063:function(e,s,t){"use strict";t.r(s),t.d(s,{AuthProvider:function(){return c},useAuth:function(){return d}});var r=t(2872),a=t(4209),i=t(9835),l=t(1397);let n=(0,a.createContext)(void 0);function d(){let e=(0,a.useContext)(n);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}function c(e){let{children:s}=e,[t,d]=(0,a.useState)(null),[c,o]=(0,a.useState)(null),[m,u]=(0,a.useState)(!0);(0,a.useEffect)(()=>{i.O.auth.getSession().then(e=>{var s;let{data:{session:t}}=e;o(t),d(null!==(s=null==t?void 0:t.user)&&void 0!==s?s:null),u(!1)});let{data:{subscription:e}}=i.O.auth.onAuthStateChange((e,s)=>{var t;o(s),d(null!==(t=null==s?void 0:s.user)&&void 0!==t?t:null),u(!1)});return()=>e.unsubscribe()},[]);let x=async e=>{try{var s,t,r;u(!0);let{data:a,error:n}=await i.O.auth.signInWithPassword({email:e.email,password:e.password});if(n)return l.default.error(n.message),{success:!1,error:n.message,timestamp:new Date};return a.user&&await i.O.from("users").update({last_login:new Date().toISOString()}).eq("id",a.user.id),l.default.success("Successfully signed in!"),{success:!0,user:a.user,accessToken:null===(s=a.session)||void 0===s?void 0:s.access_token,refreshToken:null===(t=a.session)||void 0===t?void 0:t.refresh_token,expiresIn:null===(r=a.session)||void 0===r?void 0:r.expires_in,timestamp:new Date}}catch(s){let e=s instanceof Error?s.message:"An error occurred";return l.default.error(e),{success:!1,error:e,timestamp:new Date}}finally{u(!1)}},h=async e=>{try{u(!0);let{data:s,error:t}=await i.O.auth.signUp({email:e.email,password:e.password,options:{data:{first_name:e.firstName,last_name:e.lastName}}});if(t)return l.default.error(t.message),{success:!1,error:t.message,timestamp:new Date};if(s.user){let{error:t}=await i.O.from("user_profiles").insert({user_id:s.user.id,first_name:e.firstName,last_name:e.lastName,timezone:"UTC",notification_preferences:{email:!0,sms:!1,discord:!1},risk_tolerance:"medium"});t&&console.error("Error creating user profile:",t)}return l.default.success("Account created! Please check your email for verification."),{success:!0,user:s.user,timestamp:new Date}}catch(s){let e=s instanceof Error?s.message:"An error occurred";return l.default.error(e),{success:!1,error:e,timestamp:new Date}}finally{u(!1)}},g=async()=>{try{u(!0);let{error:e}=await i.O.auth.signOut();if(e)throw l.default.error(e.message),e;l.default.success("Successfully signed out!")}catch(e){console.error("Error signing out:",e)}finally{u(!1)}},f=async e=>{try{let{error:s}=await i.O.auth.resetPasswordForEmail(e,{redirectTo:"".concat(window.location.origin,"/reset-password")});if(s)return{success:!1,error:s.message};return{success:!0}}catch(e){return{success:!1,error:e instanceof Error?e.message:"An error occurred"}}},p=async e=>{try{if(!t)return{success:!1,error:"No user logged in"};let{error:s}=await i.O.from("user_profiles").update(e).eq("user_id",t.id);if(s)return{success:!1,error:s.message};return{success:!0}}catch(e){return{success:!1,error:e instanceof Error?e.message:"An error occurred"}}};return(0,r.jsx)(n.Provider,{value:{user:t,session:c,loading:m,signIn:x,signUp:h,signOut:g,resetPassword:f,updateProfile:p},children:s})}},9835:function(e,s,t){"use strict";t.d(s,{O:function(){return n}});var r=t(4899),a=t(7337);let i=a.env.NEXT_PUBLIC_SUPABASE_URL||"https://placeholder.supabase.co",l=a.env.NEXT_PUBLIC_SUPABASE_ANON_KEY||"placeholder-key";("https://placeholder.supabase.co"===i||"placeholder-key"===l)&&console.warn("Missing Supabase environment variables. Please configure NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY");let n=(0,r.eI)(i,l)}},function(e){e.O(0,[910,299,676,376,116,577,726,744],function(){return e(e.s=2891)}),_N_E=e.O()}]);