(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{6416:function(e,t,s){Promise.resolve().then(s.bind(s,5625))},5625:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return u}});var r=s(2872),a=s(4209),i=s(6045),n=s(5543),l=s(5358);function c(){let[e,t]=(0,a.useState)([]),[s,i]=(0,a.useState)(!0),[l,c]=(0,a.useState)(null),{isAuthenticated:o,isLoading:d}=(0,n.useAuth)();if((0,a.useEffect)(()=>{if(d||!o){i(!1);return}let e=async()=>{try{i(!0),c(null);let e=await fetch("/api/trades",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(!e.ok){if(401===e.status){c("Authentication required. Please log in again.");return}if(403===e.status){c("Access denied. You do not have permission to view trades.");return}throw Error("HTTP error! status: ".concat(e.status))}let s=await e.json();s.success&&s.data?t(s.data):c(s.message||"Failed to fetch trade history")}catch(e){console.error("Failed to fetch trades:",e),c("Network error. Please check your connection and try again.")}finally{i(!1)}};e();let s=setInterval(e,3e4);return()=>clearInterval(s)},[o,d]),d)return(0,r.jsxs)("div",{className:"flex items-center justify-center p-8",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"}),(0,r.jsx)("span",{className:"ml-2 text-gray-400",children:"Checking authentication..."})]});if(!o)return(0,r.jsxs)("div",{className:"text-center p-8",children:[(0,r.jsx)("p",{className:"text-red-400",children:"Authentication required to view trade history."}),(0,r.jsx)("p",{className:"text-gray-400 text-sm mt-2",children:"Please log in to continue."})]});if(s)return(0,r.jsxs)("div",{className:"flex items-center justify-center p-8",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"}),(0,r.jsx)("span",{className:"ml-2 text-gray-400",children:"Loading trade history..."})]});if(l)return(0,r.jsxs)("div",{className:"text-center p-8",children:[(0,r.jsx)("p",{className:"text-red-400 mb-2",children:"Error loading trade history"}),(0,r.jsx)("p",{className:"text-gray-400 text-sm",children:l}),(0,r.jsx)("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",children:"Retry"})]});if(0===e.length)return(0,r.jsxs)("div",{className:"text-center p-8",children:[(0,r.jsx)("p",{className:"text-gray-400",children:"No trades recorded yet."}),(0,r.jsx)("p",{className:"text-gray-500 text-sm mt-2",children:"Configure and run a trading bot to see results."})]});let u=e=>{let t=parseFloat(e),s=t>=0;return(0,r.jsxs)("span",{className:s?"text-green-400":"text-red-400",children:[s?"+":"",t.toFixed(6)]})},h=e=>{try{return new Date(e).toLocaleString()}catch(t){return e}},x=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;return e.length>t?"".concat(e.substring(0,t),"..."):e};return(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full text-left text-sm whitespace-nowrap",children:[(0,r.jsx)("thead",{className:"border-b border-gray-600 text-gray-300",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Timestamp"}),(0,r.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Bot Type"}),(0,r.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Trade Pair"}),(0,r.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Amount"}),(0,r.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Profit"}),(0,r.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Status"}),(0,r.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Details"})]})}),(0,r.jsx)("tbody",{children:e.map(e=>(0,r.jsxs)("tr",{className:"border-b border-gray-700 hover:bg-gray-800/60",children:[(0,r.jsx)("td",{className:"px-6 py-4",children:h(e.timestamp)}),(0,r.jsx)("td",{className:"px-6 py-4",children:(0,r.jsx)("span",{className:"capitalize bg-blue-900/50 px-2 py-1 rounded text-xs",children:e.bot_type})}),(0,r.jsxs)("td",{className:"px-6 py-4",children:[(0,r.jsx)("span",{className:"text-blue-400",children:e.token_in}),(0,r.jsx)("span",{className:"text-gray-500 mx-1",children:"→"}),(0,r.jsx)("span",{className:"text-green-400",children:e.token_out})]}),(0,r.jsx)("td",{className:"px-6 py-4",children:(0,r.jsxs)("div",{className:"text-sm",children:[(0,r.jsxs)("div",{children:[parseFloat(e.amount_in).toFixed(4)," ",e.token_in]}),(0,r.jsxs)("div",{className:"text-gray-400",children:[parseFloat(e.amount_out).toFixed(4)," ",e.token_out]})]})}),(0,r.jsx)("td",{className:"px-6 py-4",children:u(e.profit)}),(0,r.jsx)("td",{className:"px-6 py-4",children:(0,r.jsx)("span",{className:"px-2 py-1 rounded text-xs ".concat("completed"===e.status?"bg-green-900/50 text-green-400":"failed"===e.status?"bg-red-900/50 text-red-400":"bg-yellow-900/50 text-yellow-400"),children:e.status})}),(0,r.jsxs)("td",{className:"px-6 py-4",children:[(0,r.jsx)("div",{className:"max-w-xs truncate",title:e.trade_details,children:x(e.trade_details)}),e.tx_hash&&(0,r.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["Tx: ",x(e.tx_hash,12)]})]})]},e.id))})]})})}var o=s(782);let d=e=>{let{bot:t,onConfigure:s}=e;return(0,r.jsxs)("div",{className:"bg-gray-800/50 rounded-lg p-6 shadow-lg hover:bg-gray-700/50 transition-colors",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,r.jsx)("h3",{className:"text-xl font-semibold",children:t.name}),(0,r.jsx)("span",{className:"px-2 py-1 text-xs rounded-full ".concat(t.isActive?"bg-green-900/50 text-green-300":t.isConfigured?"bg-yellow-900/50 text-yellow-300":"bg-gray-600 text-gray-300"),children:t.isActive?"● Active":t.isConfigured?"● Configured":"● Not Configured"})]}),(0,r.jsx)("p",{className:"text-gray-400 mb-4 text-sm",children:t.description}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{className:"text-sm",children:[(0,r.jsxs)("div",{className:"font-medium ".concat(t.profitLoss>=0?"text-green-400":"text-red-400"),children:[t.profitLoss>=0?"+":"","$",t.profitLoss.toFixed(2)]}),t.lastActivity&&(0,r.jsxs)("div",{className:"text-gray-500 text-xs",children:["Last: ",new Date(t.lastActivity).toLocaleDateString()]})]}),(0,r.jsx)(i.z,{onClick:()=>s(t.href),children:t.isConfigured?"Manage":"Configure"})]})]})};function u(){let[e,t]=(0,a.useState)([]),[s,u]=(0,a.useState)(!0),[h,x]=(0,a.useState)(""),{user:m,logout:p}=(0,n.useAuth)(),g=(0,l.useRouter)();(0,a.useEffect)(()=>{f()},[]);let f=async()=>{try{u(!0);let e=await fetch("/api/bots",{method:"GET",credentials:"include"});if(e.ok){let s=await e.json();t(s.bots||[])}else if(401===e.status){await p(),g.push("/login");return}else x("Failed to load bot status")}catch(e){console.error("Error fetching bot status:",e),x("Network error. Please try again.")}finally{u(!1)}},y=async()=>{try{await p(),g.push("/login")}catch(e){console.error("Logout error:",e),g.push("/login")}},j=e=>{g.push(e)},b=e.length>0?e:[{id:"arbitrage",type:"arbitrage",name:"Arbitrage Bot",description:"Exploits price differences across DEXs for profit opportunities.",isActive:!1,isConfigured:!1,profitLoss:0,href:"/dashboard/arbitrage"},{id:"copy-trader",type:"copy-trader",name:"Copy-Trading Bot",description:"Mirrors trades from successful wallet addresses.",isActive:!1,isConfigured:!1,profitLoss:0,href:"/dashboard/copy-trader"},{id:"sandwich",type:"sandwich",name:"MEV Bot (Advanced)",description:"Advanced MEV extraction strategies for experienced users.",isActive:!1,isConfigured:!1,profitLoss:0,href:"/dashboard/sandwich"}];return(0,r.jsx)(o.Z,{children:(0,r.jsxs)("div",{className:"min-h-screen bg-gray-900 text-white p-8",children:[(0,r.jsxs)("header",{className:"flex justify-between items-center mb-10",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold",children:"Trading Bot Dashboard"}),m&&(0,r.jsxs)("p",{className:"text-gray-400 mt-1",children:["Welcome back, ",m.email]})]}),(0,r.jsx)(i.z,{onClick:y,children:"Logout"})]}),(0,r.jsxs)("main",{children:[h&&(0,r.jsxs)("div",{className:"mb-8 p-4 bg-red-900/50 border border-red-500 rounded-md",children:[(0,r.jsx)("p",{className:"text-red-200",role:"alert",children:h}),(0,r.jsx)(i.z,{onClick:f,className:"mt-2 text-sm",children:"Retry"})]}),s?(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mb-12",children:[1,2,3].map(e=>(0,r.jsxs)("div",{className:"bg-gray-800/50 rounded-lg p-6 shadow-lg animate-pulse",children:[(0,r.jsx)("div",{className:"h-6 bg-gray-700 rounded mb-4"}),(0,r.jsx)("div",{className:"h-4 bg-gray-700 rounded mb-2"}),(0,r.jsx)("div",{className:"h-4 bg-gray-700 rounded mb-4"}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("div",{className:"h-4 bg-gray-700 rounded w-16"}),(0,r.jsx)("div",{className:"h-8 bg-gray-700 rounded w-20"})]})]},e))}):(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mb-12",children:b.map(e=>(0,r.jsx)(d,{bot:e,onConfigure:j},e.id))}),(0,r.jsxs)("div",{className:"bg-gray-800/50 rounded-lg p-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Performance Analytics"}),(0,r.jsx)(c,{})]})]})]})})}},782:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var r=s(2872),a=s(4209),i=s(5358),n=s(5543);function l(e){let{children:t}=e,{isAuthenticated:s,isLoading:l}=(0,n.useAuth)(),c=(0,i.useRouter)();return((0,a.useEffect)(()=>{l||s||c.replace("/login")},[s,l,c]),l)?(0,r.jsx)("div",{className:"min-h-screen bg-gray-900 text-white flex items-center justify-center",children:(0,r.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"}),(0,r.jsx)("p",{className:"text-gray-400",children:"Verifying authentication..."})]})}):s?(0,r.jsx)(r.Fragment,{children:t}):null}},5543:function(e,t,s){"use strict";s.r(t),s.d(t,{AuthProvider:function(){return n},useAuth:function(){return l}});var r=s(2872),a=s(4209);let i=(0,a.createContext)(void 0),n=e=>{let{children:t}=e,[s,n]=(0,a.useState)(null),[l,c]=(0,a.useState)(!1),[o,d]=(0,a.useState)(!0),u=async()=>{try{let e=await fetch("/api/auth/me",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(e.ok){let t=await e.json();t.success&&t.user?(n(t.user),c(!0)):(n(null),c(!1))}else n(null),c(!1)}catch(e){console.error("Auth check failed:",e),n(null),c(!1)}finally{d(!1)}},h=async(e,t)=>{try{if(d(!0),!e||!t)return{success:!1,message:"Email and password are required"};if(!e.includes("@")||e.length<5)return{success:!1,message:"Please enter a valid email address"};if(t.length<8)return{success:!1,message:"Password must be at least 8 characters"};let s=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:e.toLowerCase().trim(),password:t})}),r=await s.json();if(s.ok&&r.success)return n(r.user),c(!0),{success:!0};return n(null),c(!1),{success:!1,message:r.message||"Login failed. Please check your credentials."}}catch(e){return console.error("Login error:",e),n(null),c(!1),{success:!1,message:"Network error. Please check your connection and try again."}}finally{d(!1)}},x=async()=>{try{await fetch("/api/auth/logout",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"}})}catch(e){console.error("Logout error:",e)}finally{n(null),c(!1)}};return(0,a.useEffect)(()=>{u();let e=()=>{"visible"===document.visibilityState&&l&&u()};return document.addEventListener("visibilitychange",e),()=>document.removeEventListener("visibilitychange",e)},[]),(0,a.useEffect)(()=>{if(!l)return;let e=setInterval(()=>{u()},3e5);return()=>clearInterval(e)},[l]),(0,r.jsx)(i.Provider,{value:{user:s,isAuthenticated:l,isLoading:o,login:h,logout:x,checkAuth:u},children:t})},l=()=>{let e=(0,a.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},5358:function(e,t,s){"use strict";var r=s(230);s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}})},6045:function(e,t,s){"use strict";s.d(t,{z:function(){return a}});var r=s(2872);function a(e){let{children:t,className:s="",...a}=e;return(0,r.jsx)("button",{className:"px-5 py-2.5 text-base cursor-pointer bg-blue-600 text-white border-0 rounded-md hover:bg-blue-700 transition-colors ".concat(s),...a,children:t})}s(4209)}},function(e){e.O(0,[577,726,744],function(){return e(e.s=6416)}),_N_E=e.O()}]);