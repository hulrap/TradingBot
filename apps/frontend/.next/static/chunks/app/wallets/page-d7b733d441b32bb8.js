(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[982],{6234:function(e,t,s){Promise.resolve().then(s.bind(s,422))},422:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return c}});var a=s(2872),n=s(4209),r=s(6045),l=s(782);function c(){let[e,t]=(0,n.useState)([]),[s,c]=(0,n.useState)(!0),[i,o]=(0,n.useState)(""),[d,u]=(0,n.useState)(!1);(0,n.useEffect)(()=>{h()},[]);let h=async()=>{try{c(!0);let e=await fetch("/api/wallets",{method:"GET",credentials:"include"});if(e.ok){let s=await e.json();t(s.wallets||[])}else o("Failed to load wallet connections")}catch(e){console.error("Error fetching wallets:",e),o("Network error. Please try again.")}finally{c(!1)}},m=async e=>{u(!0),o("");try{if("metamask"===e){if(void 0===window.ethereum){o("MetaMask is not installed. Please install MetaMask to continue.");return}let e=await window.ethereum.request({method:"eth_request_accounts"});if(e.length>0){let t=e[0],s=await fetch("/api/wallets/connect",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({address:t,type:"metamask"})});if(s.ok)await h();else{let e=await s.json();o(e.message||"Failed to connect wallet")}}}else"walletconnect"===e&&o("WalletConnect integration coming soon. Please use MetaMask for now.")}catch(e){console.error("Wallet connection error:",e),4001===e.code?o("Wallet connection was rejected. Please try again."):o("Failed to connect wallet. Please try again.")}finally{u(!1)}},x=async e=>{try{(await fetch("/api/wallets/".concat(e),{method:"DELETE",credentials:"include"})).ok?await h():o("Failed to disconnect wallet")}catch(e){console.error("Error disconnecting wallet:",e),o("Network error. Please try again.")}};return(0,a.jsx)(l.Z,{children:(0,a.jsxs)("div",{className:"min-h-screen bg-gray-900 text-white p-8",children:[(0,a.jsxs)("header",{className:"mb-10",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold",children:"Wallet Management"}),(0,a.jsx)("p",{className:"text-gray-400",children:"Connect your wallets securely for trading bot operations. Your private keys never leave your wallet."})]}),(0,a.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,a.jsxs)("div",{className:"bg-green-900/20 border-l-4 border-green-500 text-green-200 p-4 rounded-md mb-8",role:"alert",children:[(0,a.jsx)("p",{className:"font-bold",children:"\uD83D\uDD12 Secure Connection"}),(0,a.jsx)("p",{children:"We use secure wallet connection protocols. Your private keys remain safely in your wallet and are never transmitted or stored on our servers."})]}),(0,a.jsxs)("div",{className:"bg-gray-800/50 p-6 rounded-lg shadow-lg mb-8",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Connect New Wallet"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsx)(r.z,{onClick:()=>m("metamask"),disabled:d,className:"h-16",children:"\uD83E\uDD8A MetaMask"}),(0,a.jsx)(r.z,{onClick:()=>m("walletconnect"),disabled:d,className:"h-16",children:"\uD83D\uDCF1 WalletConnect"})]})]}),i&&(0,a.jsx)("div",{className:"mb-6 p-4 bg-red-900/50 border border-red-500 rounded-md",children:(0,a.jsx)("p",{className:"text-red-200",role:"alert",children:i})}),(0,a.jsxs)("div",{className:"bg-gray-800/50 p-6 rounded-lg shadow-lg",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Connected Wallets"}),s?(0,a.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"}),(0,a.jsx)("span",{className:"ml-2 text-gray-400",children:"Loading wallets..."})]}):0===e.length?(0,a.jsxs)("div",{className:"text-center py-8 text-gray-400",children:[(0,a.jsx)("p",{children:"No wallets connected yet."}),(0,a.jsx)("p",{className:"text-sm",children:"Connect a wallet above to get started."})]}):(0,a.jsx)("div",{className:"space-y-4",children:e.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-700/50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("div",{className:"text-2xl",children:"metamask"===e.type?"\uD83E\uDD8A":"walletconnect"===e.type?"\uD83D\uDCF1":"\uD83D\uDD10"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"font-medium",children:[e.address.slice(0,6),"...",e.address.slice(-4)]}),(0,a.jsxs)("div",{className:"text-sm text-gray-400 capitalize",children:[e.type," • Balance: ",e.balance," ETH"]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("span",{className:"px-2 py-1 text-xs rounded-full ".concat(e.isActive?"bg-green-900/50 text-green-300":"bg-gray-600 text-gray-300"),children:e.isActive?"Active":"Inactive"}),(0,a.jsx)(r.z,{onClick:()=>x(e.id),className:"text-red-400 hover:text-red-300",children:"Disconnect"})]})]},e.id))})]}),(0,a.jsxs)("div",{className:"mt-8 bg-blue-900/20 border-l-4 border-blue-500 text-blue-200 p-4 rounded-md",children:[(0,a.jsx)("p",{className:"font-bold",children:"\uD83D\uDCA1 How it works"}),(0,a.jsxs)("ul",{className:"mt-2 space-y-1 text-sm",children:[(0,a.jsx)("li",{children:"• Connect your wallet using secure protocols (MetaMask, WalletConnect)"}),(0,a.jsx)("li",{children:"• Your private keys never leave your wallet"}),(0,a.jsx)("li",{children:"• Trading bots will request transaction approval from your wallet"}),(0,a.jsx)("li",{children:"• You maintain full control and can disconnect at any time"})]})]})]})]})})}},782:function(e,t,s){"use strict";s.d(t,{Z:function(){return c}});var a=s(2872),n=s(4209),r=s(5358),l=s(5543);function c(e){let{children:t}=e,{isAuthenticated:s,isLoading:c}=(0,l.useAuth)(),i=(0,r.useRouter)();return((0,n.useEffect)(()=>{c||s||i.replace("/login")},[s,c,i]),c)?(0,a.jsx)("div",{className:"min-h-screen bg-gray-900 text-white flex items-center justify-center",children:(0,a.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"}),(0,a.jsx)("p",{className:"text-gray-400",children:"Verifying authentication..."})]})}):s?(0,a.jsx)(a.Fragment,{children:t}):null}},5543:function(e,t,s){"use strict";s.r(t),s.d(t,{AuthProvider:function(){return l},useAuth:function(){return c}});var a=s(2872),n=s(4209);let r=(0,n.createContext)(void 0),l=e=>{let{children:t}=e,[s,l]=(0,n.useState)(null),[c,i]=(0,n.useState)(!1),[o,d]=(0,n.useState)(!0),u=async()=>{try{let e=await fetch("/api/auth/me",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(e.ok){let t=await e.json();t.success&&t.user?(l(t.user),i(!0)):(l(null),i(!1))}else l(null),i(!1)}catch(e){console.error("Auth check failed:",e),l(null),i(!1)}finally{d(!1)}},h=async(e,t)=>{try{if(d(!0),!e||!t)return{success:!1,message:"Email and password are required"};if(!e.includes("@")||e.length<5)return{success:!1,message:"Please enter a valid email address"};if(t.length<8)return{success:!1,message:"Password must be at least 8 characters"};let s=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:e.toLowerCase().trim(),password:t})}),a=await s.json();if(s.ok&&a.success)return l(a.user),i(!0),{success:!0};return l(null),i(!1),{success:!1,message:a.message||"Login failed. Please check your credentials."}}catch(e){return console.error("Login error:",e),l(null),i(!1),{success:!1,message:"Network error. Please check your connection and try again."}}finally{d(!1)}},m=async()=>{try{await fetch("/api/auth/logout",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"}})}catch(e){console.error("Logout error:",e)}finally{l(null),i(!1)}};return(0,n.useEffect)(()=>{u();let e=()=>{"visible"===document.visibilityState&&c&&u()};return document.addEventListener("visibilitychange",e),()=>document.removeEventListener("visibilitychange",e)},[]),(0,n.useEffect)(()=>{if(!c)return;let e=setInterval(()=>{u()},3e5);return()=>clearInterval(e)},[c]),(0,a.jsx)(r.Provider,{value:{user:s,isAuthenticated:c,isLoading:o,login:h,logout:m,checkAuth:u},children:t})},c=()=>{let e=(0,n.useContext)(r);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},5358:function(e,t,s){"use strict";var a=s(230);s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}})},6045:function(e,t,s){"use strict";s.d(t,{z:function(){return n}});var a=s(2872);function n(e){let{children:t,className:s="",...n}=e;return(0,a.jsx)("button",{className:"px-5 py-2.5 text-base cursor-pointer bg-blue-600 text-white border-0 rounded-md hover:bg-blue-700 transition-colors ".concat(s),...n,children:t})}s(4209)}},function(e){e.O(0,[577,726,744],function(){return e(e.s=6234)}),_N_E=e.O()}]);